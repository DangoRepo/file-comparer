## 文档说明

1. 此文档命令中，`<>` 标记框起来的部分为参数，请按照实际情况填写
2. 如果使用的路径值中含有空格，请使用 `""` 或者 `''` (英文双引号或单引号) 将路径包含起来，以防止处理出错

## 准备工作

1. 此准备工作仅需运行一次

2. 在 [Node.js](https://nodejs.org/en/) 站点下载 Node.js 并安装

   1. 建议版本 >= 18
   2. 不建议安装奇数版本，如 13、15、17，奇数版本由于没有充分的进行测试，为不稳定版本

3. 安装 Node.js 之后，打开命令提示符，依次输入：

   ```bash
   node -v
   npm --version
   corepack --version
   ```

   此操作会输出三个版本号，表示安装成功，如果没有版本号输出请重新安装 Node.js

4. 此处推荐使用 `pnpm` 工具。高版本 `Node.js` 自带 `pnpm`，但需手动开启。打开命令提示符，输入以下命令以开启 `pnpm`：

   ```bash
   corepack enable
   ```

5. **注**：
   - `npm` 为 `Node.js` 的包管理工具；此外，上述步骤会开启 `pnpm` 包管理工具。
   - 此文档中会提供 `npm`、`pnpm` 两套命令，根据你使用的工具，只需执行其中一句即可。

## 使用方法
1. Windows 下打开命令提示符（`CMD.exe`），Linux / Unix / MacOS 下打开终端，使用 `cd` 命令切换到解压后的工具目录

      ```bash
      cd /d <工具路径> # Windows 命令
      cd <工具路径>    # Linux / Unix / MacOS 命令
      ```

2. 运行以下命令，等待依赖包安装完成：

   ```bash
   npm i
   pnpm i
   ```

3. 运行以下命令，进行文件对比，生成报告

   ```bash
   npm run compare -- ...参数
   pnpm run compare ...参数

   ```
   参数说明：

| 参数标记 | 是否必填 | 默认值 | 说明 |
| :--- | :---: | :--- | :--- |
| `--lhs-queue`<br>`-n` | 否 | `10` | 计算左侧文件数字签名时，同时进行的任务数量，越多则执行越快，但消耗资源也会越多 |
| `--lhs`<br>`-l` | 是 | | 左侧对比文件夹路径 |
| `--rhs-queue`<br>`-m` | 否 | `10` | 计算右侧文件数字签名时，同时进行的任务数量，越多则执行越快，但消耗资源也会越多 |
| `--rhs`<br>`-r` | 是 | | 右侧对比文件夹路径 |
| `--output`<br>`-o` | 是 | | 报告生成的文件夹路径 |

4. 比较结果会生成在报告文件夹，如果报告文件夹不存在会自动生成

- `/delete/` 删除的文件
- `/modify/` 发生更改的文件
- `/new/` 新增的文件

5. 报告文件生成在报告文件夹，如果报告文件不存在会自动生成，具体文件的作用请参照「报告文件说明」部分

## 报告文件说明

- `analysis.json` 左右文件夹中文件的比较结果（仅统计数量），JSON 格式
- `file-summary-lhs.json` 左文件夹中文件的摘要数据，JSON 格式
- `file-summary-rhs.json` 右文件夹中文件的摘要数据，JSON 格式
- `compare-summary.json` 左右文件夹中文件的比较结果摘要，JSON 格式
- `compare-summary.html` 可视化的文件对比报告，可直接使用浏览器打开
- `/modify/renamed-files.json` 文件名发生变化的文件，JSON 格式
